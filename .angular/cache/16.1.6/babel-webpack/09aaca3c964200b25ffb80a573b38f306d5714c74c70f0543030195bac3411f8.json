{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { NavigationEnd } from '@angular/router';\nimport { getISOWeek } from 'date-fns';\nexport let NavbarAdminComponent = class NavbarAdminComponent {\n  constructor(onCallService, authService, sharedTitleService, infosServices, router, sharedService) {\n    this.onCallService = onCallService;\n    this.authService = authService;\n    this.sharedTitleService = sharedTitleService;\n    this.infosServices = infosServices;\n    this.router = router;\n    this.sharedService = sharedService;\n    this.isMenuVisible = false;\n    this.isCreateTicketVisible$ = this.sharedService.isCreateTicketVisible$;\n    this.menuImgSrc = 'assets/icons/menu.png';\n    this.onCallsThisWeek = [];\n    this.onCallsLastWeek = [];\n    this.onCallsNextWeek = [];\n    this.isHovered = false;\n    this.isLast = false;\n    this.isCurrent = false;\n    this.isNext = false;\n    this.isEmergency = false;\n    this.isPrimary = false;\n    this.lastAskedLog = [];\n    this.currentDate = new Date();\n    this.currentYear = this.currentDate.getFullYear();\n    this.currentWeek = getISOWeek(this.currentDate);\n    this.lastWeek = this.currentWeek - 1;\n    this.nextWeek = this.currentWeek + 1;\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.currentRoute = event.url;\n      }\n    });\n  }\n  ngOnInit() {\n    this.sharedTitleService.currentTitle.subscribe(newTitle => {\n      this.title = newTitle;\n    });\n    this.getOnCallThisWeek();\n    this.getOnCallLastWeek();\n    this.getOnCallNextWeek();\n    this.getLastAskedLogs();\n  }\n  isCustomerEnabled() {\n    return this.authService.getUserRole() === 10 || this.authService.getUserRole() === 11 || this.authService.getUserRole() === 12;\n  }\n  toggleMenu() {\n    this.isMenuVisible = !this.isMenuVisible;\n    this.menuImgSrc = this.isMenuVisible ? 'assets/icons/menu-close.png' : 'assets/icons/menu.png';\n  }\n  isTechnnavRoute() {\n    return this.currentRoute === '/';\n  }\n  isManagerEnabled() {\n    return this.authService.getUserRole() === 1;\n  }\n  isTechnnavChildRoute() {\n    return this.currentRoute !== '/';\n  }\n  isSalesSupportDisabled() {\n    return this.authService.getUserRole() === 3;\n  }\n  toggleVisibility() {\n    const currentVisibility = this.sharedService.getIsCreateTicketVisible();\n    this.sharedService.setCreateTicketVisibility(!currentVisibility);\n  }\n  createTicket() {\n    this.toggleMenu();\n    this.toggleVisibility();\n  }\n  getOnCallThisWeek() {\n    this.onCallService.findOnCallsBySemaine(this.currentWeek, this.currentYear).subscribe(data => {\n      this.onCallsThisWeek = data;\n    }, error => {\n      console.error('Erreur lors de la récupération des on calls:', error);\n    });\n  }\n  getLastAskedLogs() {\n    this.infosServices.getLastLogAsked().subscribe(data => {\n      this.lastAskedLog = data;\n    }, error => {\n      console.error('Erreur lors de la récupération des on calls:', error);\n    });\n  }\n  getOnCallLastWeek() {\n    this.onCallService.findOnCallsBySemaine(this.lastWeek, this.currentYear).subscribe(data => {\n      this.onCallsLastWeek = data;\n    }, error => {\n      console.error('Erreur lors de la récupération des on calls:', error);\n    });\n  }\n  getOnCallNextWeek() {\n    this.onCallService.findOnCallsBySemaine(this.nextWeek, this.currentYear).subscribe(data => {\n      this.onCallsNextWeek = data;\n      console.log(data);\n    }, error => {\n      console.error('Erreur lors de la récupération des on calls:', error);\n    });\n  }\n};\nNavbarAdminComponent = __decorate([Component({\n  selector: 'app-navbar-admin',\n  templateUrl: './navbar-admin.component.html',\n  styleUrls: ['./navbar-admin.component.scss']\n})], NavbarAdminComponent);","map":{"version":3,"names":["Component","NavigationEnd","getISOWeek","NavbarAdminComponent","constructor","onCallService","authService","sharedTitleService","infosServices","router","sharedService","isMenuVisible","isCreateTicketVisible$","menuImgSrc","onCallsThisWeek","onCallsLastWeek","onCallsNextWeek","isHovered","isLast","isCurrent","isNext","isEmergency","isPrimary","lastAskedLog","currentDate","Date","currentYear","getFullYear","currentWeek","lastWeek","nextWeek","events","subscribe","event","currentRoute","url","ngOnInit","currentTitle","newTitle","title","getOnCallThisWeek","getOnCallLastWeek","getOnCallNextWeek","getLastAskedLogs","isCustomerEnabled","getUserRole","toggleMenu","isTechnnavRoute","isManagerEnabled","isTechnnavChildRoute","isSalesSupportDisabled","toggleVisibility","currentVisibility","getIsCreateTicketVisible","setCreateTicketVisibility","createTicket","findOnCallsBySemaine","data","error","console","getLastLogAsked","log","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/mac/Desktop/w's work/new/Sans titre/src/app/navbar-admin/navbar-admin.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { SharedTitleService } from '../services/shared-title.service';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { getISOWeek } from 'date-fns';\nimport { OnCallService } from '../services/on-call.service';\nimport { InfosService } from '../services/infos.service';\nimport { AuthService } from '../services/auth.service';\nimport { SharedService } from '../services/shared.service';\n\n@Component({\n  selector: 'app-navbar-admin',\n  templateUrl: './navbar-admin.component.html',\n  styleUrls: ['./navbar-admin.component.scss']\n})\nexport class NavbarAdminComponent implements OnInit {\n  currentRoute!: string;\n  isMenuVisible: boolean = false;\n  isCreateTicketVisible$ = this.sharedService.isCreateTicketVisible$;\n  menuImgSrc: string = 'assets/icons/menu.png';\n  title!: string;\n  onCallsThisWeek: any[] = [];\n  onCallsLastWeek: any[] = [];\n  onCallsNextWeek: any[] = [];\n  isHovered: boolean = false;\n  isLast: boolean = false;\n  isCurrent: boolean = false;\n  isNext: boolean = false;\n  mail!: string;\n  isEmergency: boolean = false;\n  isPrimary: boolean = false;\n  lastAskedLog: any[] = [];\n\n  currentDate: Date = new Date();\n  currentYear: number = this.currentDate.getFullYear();\n  currentWeek: number = getISOWeek(this.currentDate);\n  lastWeek: number = this.currentWeek - 1 ;\n  nextWeek: number = this.currentWeek + 1 ;\n\n  constructor(\n    private onCallService: OnCallService,\n    private authService: AuthService,\n    private sharedTitleService: SharedTitleService,\n    private infosServices: InfosService,\n    private router: Router,\n    private sharedService: SharedService\n  ) {\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.currentRoute = event.url;\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.sharedTitleService.currentTitle.subscribe((newTitle) => {\n      this.title = newTitle;\n    });\n    this.getOnCallThisWeek();\n    this.getOnCallLastWeek();\n    this.getOnCallNextWeek();\n    this.getLastAskedLogs();\n  }\n\n  isCustomerEnabled(): boolean {\n    return this.authService.getUserRole() === 10 || this.authService.getUserRole() === 11 || this.authService.getUserRole() === 12;\n  }\n\n  toggleMenu() {\n    this.isMenuVisible = !this.isMenuVisible;\n    this.menuImgSrc = this.isMenuVisible ? 'assets/icons/menu-close.png' : 'assets/icons/menu.png';\n  }\n\n  isTechnnavRoute(): boolean {\n    return this.currentRoute === '/';\n  }\n\n  isManagerEnabled(): boolean {\n    return this.authService.getUserRole() === 1;\n  }\n\n  isTechnnavChildRoute(): boolean {\n    return this.currentRoute !== '/';\n  }\n  \n  isSalesSupportDisabled(): boolean {\n    return this.authService.getUserRole() === 3 \n  }\n\n  toggleVisibility(): void {\n    const currentVisibility = this.sharedService.getIsCreateTicketVisible();\n    this.sharedService.setCreateTicketVisibility(!currentVisibility);\n  }\n\n  createTicket() {\n    this.toggleMenu();\n    this.toggleVisibility();\n  }\n\n  getOnCallThisWeek () {\n    this.onCallService.findOnCallsBySemaine(this.currentWeek, this.currentYear).subscribe(\n      data => {\n        this.onCallsThisWeek = data;\n      },\n      error => {\n        console.error('Erreur lors de la récupération des on calls:', error);\n      }\n    );\n  }\n\n  getLastAskedLogs () {\n    this.infosServices.getLastLogAsked().subscribe(\n      data => {\n        this.lastAskedLog = data;\n      },\n      error => {\n        console.error('Erreur lors de la récupération des on calls:', error);\n      }\n    );\n  }\n\n  getOnCallLastWeek () {\n    this.onCallService.findOnCallsBySemaine(this.lastWeek, this.currentYear).subscribe(\n      data => {\n        this.onCallsLastWeek = data;\n      },\n      error => {\n        console.error('Erreur lors de la récupération des on calls:', error);\n      }\n    );\n  }\n\n  getOnCallNextWeek () {\n    this.onCallService.findOnCallsBySemaine(this.nextWeek, this.currentYear).subscribe(\n      data => {\n        this.onCallsNextWeek = data;\n        console.log(data);\n      },\n      error => {\n        console.error('Erreur lors de la récupération des on calls:', error);\n      }\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}